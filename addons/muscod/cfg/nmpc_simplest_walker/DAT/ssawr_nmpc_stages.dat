******************************************************************************
* MUSCOD-II example
*
* Implementation of simplest walker model.
*
* Copyright (C) 2015, Manuel Kudruss, IWR, Heidelberg
******************************************************************************

*  # of multiple shooting intervals on model stages
nshoot
0:  1 # feedback
1:  9 # transition
2:  1 # switch
3:  1 # limit feedback
4:  9 # limit
5:  1 # limit switch

*******************************************************************************
*  parameters start values, scale factors, and bounds

; from optimal solution
; p
;   0:   4.0000000000000001E-03
;   1:   1.2000000000000000E-01
;   2:   7.1287355334311532E-01
;   3:   1.4257471066863946E-01
;   4:   5.6404888112861250E-01
;   5:   1.8283519311257836E-01

p
  0:   0.004
  1:   0.12
  2:   0.0 ; no initial slack
  3:   0.0 ; no initial slack
  4:   0.0 ; no initial slack
  5:   0.0 ; no initial slack

p_sca
ALL: 1.0

p_min
  0:  -1.0
  1:   0.0
  2:  -2.0
  3:  -2.0
  4:  -2.0
  5:  -2.0

p_max
  0:  1.0
  1:  0.0
  2:  2.0
  3:  2.0
  4:  2.0
  5:  2.0

p_fix
  0: 1
  1: 1
  2: 0
  3: 0
  4: 0
  5: 0

p_name
  0: ! slope
  1: ! v_ref
  2: slack0
  3: slack1
  4: slack2
  5: slack3

*******************************************************************************
*  model stage duration start values, scale factors, and bounds

; from optimal solution
h
  0:   2.0000000000000001E-01
  1:   3.6198638741465565E+00
  2:   0.0000000000000000E+00
  3:   2.0000000000000001E-01
  4:   3.4961669002864504E+00
  5:   0.0000000000000000E+00

h
  0:  0.2 # fixed to control rate
  1:  3.0
  2:  0.0
  3:  0.2
  4:  3.0
  5:  0.0

h_sca
ALL:  1.0

h_min
  0:  0.0
  1:  0.0
  2:  0.0
  3:  0.2
  4:  0.0
  5:  0.0

h_max
  0:  0.2
  1:  8.0
  2:  0.0
  3:  0.2
  4:  8.0
  5:  0.0

h_fix
  0:  0
  1:  0
  2:  1
  3:  0
  4:  0
  5:  1

h_name
  0: feedback
  1: transition
  2: ! double_support
  3: !feedback
  4: limit_cycle
  5: ! double_support

*******************************************************************************
*  differential state start values, scale factors, and bounds

* specification mode for state variable start values
* 0 : all values sd(*,*), sa(*,*) specified in data file
* 1 : linear interpolation
* 2 : start values given, all others generated by integration

s_spec
0

###############################################################################
# DAT FILE INITIALIZATION
###############################################################################

; sd_max(0,0)  ! 0
;   0: 100.0
;   1: 100.0
;   2: 100.0
;   3: 100.0
;   4:   0.0
;   5:   0.0

; sd_min(0,0)  ! 0
;   0: -100.0
;   1: -100.0
;   2: -100.0
;   3: -100.0
;   4:    0.0
;   5:    0.0

sd_min(0,0)  ! 0
  0:  0.153400
  1:  0.306800
  2: -0.156100
  3: -0.007300
  4:  0.0
  5:  0.0

sd_max(0,0)  ! 0
  0:  0.153400
  1:  0.306800
  2: -0.156100
  3: -0.007300
  4:  0.0
  5:  0.0

###############################################################################
# DAT FILE INITIALIZATION
###############################################################################

sd(0,0)  ! 0
  0:   1.5340000000000001E-01
  1:   3.0680000000000002E-01
  2:  -1.5609999999999999E-01
  3:  -7.3000000000000001E-03
  4:   0.0000000000000000E+00
  5:   0.0000000000000000E+00

sd(1,0)  ! 1
  0:   1.2496028754358292E-01
  1:   3.0225509496198377E-01
  2:  -1.2923581422795280E-01
  3:  -3.9062842600126602E-02
  4:   2.8163753389016333E-02
  5:   2.0000000000000001E-01

sd(1,1)  ! 2
  0:   8.1468010278354763E-02
  1:   2.7186451256515987E-01
  2:  -8.9925677079518956E-02
  3:  -1.1327700017226937E-01
  4:   7.1421161791152946E-02
  5:   6.0220709712739529E-01

sd(1,2)  ! 3
  0:   5.0662963088400056E-02
  1:   2.1158386626715381E-01
  2:  -6.5309818070526701E-02
  3:  -1.8472439695690315E-01
  4:   1.0215779154106007E-01
  5:   1.0044141942547904E+00

sd(1,3)  ! 4
  0:   2.7505575943065151E-02
  1:   1.2586213907092278E-01
  2:  -5.1388925863106338E-02
  3:  -2.3745608032336485E-01
  4:   1.2529697654077782E-01
  5:   1.4066212913821854E+00

sd(1,4)  ! 5
  0:   8.2017288410630943E-03
  1:   2.4641881854454099E-02
  2:  -4.5891058548963894E-02
  3:  -2.6040026172744984E-01
  4:   1.4459744748277201E-01
  5:   1.8088283885095806E+00

sd(1,5)  ! 6
  0:  -1.0413208883061912E-02
  1:  -7.8938235359536799E-02
  2:  -4.7917339333859915E-02
  3:  -2.4896433452796873E-01
  4:   1.6321210507661429E-01
  5:   2.2110354856369754E+00

sd(1,6)  ! 7
  0:  -3.1391217143772562E-02
  1:  -1.7134358018261145E-01
  2:  -5.7799148144640648E-02
  3:  -2.0580464935669460E-01
  4:   1.8418514629347360E-01
  5:   2.6132425827643710E+00

sd(1,7)  ! 8
  0:  -5.8170542970609002E-02
  1:  -2.4149301672639040E-01
  2:  -7.7150924382420064E-02
  3:  -1.4027809636330502E-01
  4:   2.1093682673591108E-01
  5:   3.0154496798917663E+00

sd(1,8)  ! 9
  0:  -9.5135848899309955E-02
  1:  -2.8315862262339336E-01
  2:  -1.0912471391330025E-01
  3:  -6.6860415400490716E-02
  4:   2.4779148929708730E-01
  5:   3.4176567770191610E+00

sd(2,0)  ! 10
  0:  -1.4832533039644574E-01
  1:  -2.9665066076631574E-01
  2:  -1.5889149966413174E-01
  3:  -3.3025701732341656E-03
  4:   3.0058114642297207E-01
  5:   3.8198638741465563E+00

sd(3,0)  ! 11
  0:   1.4832533039644574E-01
  1:   2.9665066079289149E-01
  2:  -1.5195129265852600E-01
  3:  -6.6370680160825861E-03
  4:   0.0000000000000000E+00
  5:   0.0000000000000000E+00

sd(4,0)  ! 12
  0:   1.2061998169310367E-01
  1:   2.9232297623736492E-01
  2:  -1.2601721751487321E-01
  3:  -3.7525662426947076E-02
  4:   2.7454352478479806E-02
  5:   2.0000000000000004E-01

sd(4,1)  ! 13
  0:   7.9323058181634418E-02
  1:   2.6448201005763317E-01
  2:  -8.9254762423774295E-02
  3:  -1.0697723700601616E-01
  4:   6.8542162324734396E-02
  5:   5.8846298892071680E-01

sd(4,2)  ! 14
  0:   4.9523753650752352E-02
  1:   2.0953956918155289E-01
  2:  -6.6087744674313387E-02
  3:  -1.7446449535835429E-01
  4:   9.8278549040695051E-02
  5:   9.7692597784143365E-01

sd(4,3)  ! 15
  0:   2.6678049431118844E-02
  1:   1.3107484467912542E-01
  2:  -5.3007645240718805E-02
  3:  -2.2601899804642783E-01
  4:   1.2110717653509595E-01
  5:   1.3653889667621502E+00

sd(4,4)  ! 16
  0:   7.2973483889901903E-03
  1:   3.7356047410431040E-02
  2:  -4.8025123410519448E-02
  3:  -2.5170784259332951E-01
  4:   1.4048477792358252E-01
  5:   1.7538519556828669E+00

sd(4,5)  ! 17
  0:  -1.1579502854492661E-02
  1:  -6.0491540106286240E-02
  2:  -5.0381107079623275E-02
  3:  -2.4694961235999702E-01
  4:   1.5936130564029061E-01
  5:   2.1423149446035836E+00

sd(4,6)  ! 18
  0:  -3.2836889032241183E-02
  1:  -1.5073402989469503E-01
  2:  -6.0434604491937043E-02
  3:  -2.1324750743736556E-01
  4:   1.8061304980082832E-01
  5:   2.5307779335243001E+00

sd(4,7)  ! 19
  0:  -5.9721745851806542E-02
  1:  -2.2337714601258035E-01
  2:  -7.9715887046786310E-02
  3:  -1.5793905338851649E-01
  4:   2.0746831236512983E-01
  5:   2.9192409224450180E+00

sd(4,8)  ! 20
  0:  -9.6336288557090588E-02
  1:  -2.7223803160466348E-01
  2:  -1.1115061295948786E-01
  3:  -9.3089434526006265E-02
  4:   2.4396940874757278E-01
  5:   3.3077039113657349E+00

sd(5,0)  ! 21
  0:  -1.4825404304111145E-01
  1:  -2.9650808607320739E-01
  2:  -1.5947436393409603E-01
  3:  -3.4080058390967685E-02
  4:   2.9549361881208036E-01
  5:   3.6961669002864510E+00

sd(5,1)  ! 22
  0:   1.4825404304111145E-01
  1:   2.9650808608222290E-01
  2:  -1.5251534153965460E-01
  3:  -6.6553515353938433E-03
  4:   7.3272449448343610E-39
  5:   0.0000000000000000E+00


u(0,0)  ! 0
  0:  -1.6145199190166792E-03

ue(0)  ! 1-
  0:  -1.6145199190166792E-03

u(1,0)  ! 1
  0:  -1.5310177724242385E-03

u(1,1)  ! 2
  0:   9.1339907057447168E-04

u(1,2)  ! 3
  0:   3.2156104073517498E-03

u(1,3)  ! 4
  0:   5.0132435845419501E-03

u(1,4)  ! 5
  0:   6.0159496532932750E-03

u(1,5)  ! 6
  0:   6.0628303623140693E-03

u(1,6)  ! 7
  0:   5.1538449172494052E-03

u(1,7)  ! 8
  0:   3.4441877172179149E-03

u(1,8)  ! 9
  0:   1.2086797537603988E-03

ue(1)  ! 10-
  0:   1.2086797537603988E-03

u(2,0)  ! 10
  0:  -1.8109688066522593E-14

ue(2)  ! 11-
  0:  -1.8109688066522593E-14

u(3,0)  ! 11
  0:  -1.4346915781246342E-03

ue(3)  ! 12-
  0:  -1.4346915781246342E-03

u(4,0)  ! 12
  0:  -8.9089625355675216E-04

u(4,1)  ! 13
  0:   1.6732253067998498E-03

u(4,2)  ! 14
  0:   3.9959487856218402E-03

u(4,3)  ! 15
  0:   5.7351140265893604E-03

u(4,4)  ! 16
  0:   6.6278257619538077E-03

u(4,5)  ! 17
  0:   6.5393223661251478E-03

u(4,6)  ! 18
  0:   5.4884474403708045E-03

u(4,7)  ! 19
  0:   3.6405684519921909E-03

u(4,8)  ! 20
  0:   1.2731383438817894E-03

ue(4)  ! 21-
  0:   1.2731383438817894E-03

u(5,0)  ! 21
  0:  -6.9680231228864864E-15

ue(5)  ! 22-
  0:  -6.9680231228864864E-15

###############################################################################

sd_sca(*,*)
ALL: 1.0

sd(*,*)
 0: 0.0
 1: 0.0
 2: 0.0
 3: 0.0
 4: 0.0
 5: 0.0

sd_min(*,*)
 0: -100.0
 1: -100.0
 2: -100.0
 3: -100.0
 4:    0.0
 5:    0.0

sd_max(*,*)
 0:  100.0
 1:  100.0
 2:  100.0
 3:  100.0
 4:  100.0
 5:  100.0

xd_name
 0: phi_st
 1: phi_h
 2: dphi_st
 3: dphi_h
 4: v_h
 5: time

*******************************************************************************
*  control parameterization types

u_type(*)
ALL: 0

*******************************************************************************
*  control start values, scale factors, and bounds

u(*,*)
 0: 0.0

u_sca(*,*)
 0: 1.0

u_min(*,*)
 0: -10.0

u_max(*,*)
 0:  10.0

u_fix(*,*)
 0:  0

u_name
 0: hip_actuation

*******************************************************************************
* decoupled i.p.c. scale factors

rd_sca(0,s)
ALL: 1.0

rd_sca(0,i)
ALL: 1.0

rd_sca(0,e)
ALL: 1.0

*******************************************************************************
* coupled i.p.c. scale factors

rc_sca
ALL: 1.0

*******************************************************************************
*  objective scale and expected range

of_sca
1.0

of_min
-1000000.0

of_max
1000000.0

of_name
objective

nhist
30

*******************************************************************************
* Choosing libraries *

libmodel
libssawr_nmpc_stages

libhessian
hess_gaussnewton
hess_limitedmemoryupdate
hess_update

libsolve
solve_fullstep
solve_slse
solve_alf
solve_tbox

libcond
cond_min

libtchk
tchk

libmssqp
mssqp_standard

libeval
eval_ind

libind
0: ind_rkfswt
1: ind_rkfswt
2: ind_strans
3: ind_rkfswt
4: ind_rkfswt
5: ind_strans

libqps
qps_qpopt

libplot
plot_pgplot
plot_noplot

*******************************************************************************
* Setting algorithmic parameters *

options_acc
1e-6
options_ftol
-1.0
options_itol
-1.0
options_rfac
0.0
options_levmar
0.0000
options_qp_featol
1.0e-8
options_qp_relax
1.1
options_nhtopy
0
options_frstart
0
options_frmax
0
options_itmax
500
options_plevel_screen
0
options_plevel_file
-1
options_plevel_matlab
-1
options_bflag
-1
options_qp_itmax
10000
options_qp_expand
99999999
options_sflag
0
options_options_wflag
0
options_cflag
0
options_output_ps
0
options_output_gif
0
options_plot_stage_marker
1
options_iest_hess_plitt
0
*******************************************************************************
