# Define some options
OPTION(WITH_FFMPEG "Enable GLWidget video encoding through FFMPEG")
OPTION(WITH_GUI "Enable QT-based GUI" ON)
OPTION(WITH_REALTIME "Enable real-time settings (LxRtSerial, ANN)")

IF (CMAKE_BUILD_TYPE STREQUAL "Debug")
  ADD_DEFINITIONS(-DDEBUG)
ENDIF (CMAKE_BUILD_TYPE STREQUAL "Debug")

IF (WITH_FFMPEG)
  ADD_DEFINITIONS(-DUSE_FFMPEG)
ENDIF (WITH_FFMPEG)

IF (WITH_GUI)
  ADD_DEFINITIONS(-DGUI)
ENDIF (WITH_GUI)

IF (WITH_REALTIME)
  ADD_DEFINITIONS(-DREALTIME_SERIAL)
  ADD_DEFINITIONS(-DANN_REALTIME)
ENDIF (WITH_REALTIME)

IF (CMAKE_COMPILER_IS_GNUCXX)
  IF (NOT LINKER_START_GROUP)
    # Allow the linker to search the libraries repeatedly to resolve the logging library dependencies
    SET(CMAKE_EXE_LINKER_FLAGS_DEBUG "${CMAKE_EXE_LINKER_FLAGS_DEBUG} -Wl,--start-group")
    SET(CMAKE_EXE_LINKER_FLAGS_RELEASE "${CMAKE_EXE_LINKER_FLAGS_RELEASE} -Wl,--start-group")
    SET(LINKER_START_GROUP 1)
  ENDIF (NOT LINKER_START_GROUP)
ENDIF (CMAKE_COMPILER_IS_GNUCXX)


# Define compiler version (COMPILER_VERSION)
INCLUDE(${WORKSPACE_DIR}/dbl/platform/getcompilerversion.cmake)

